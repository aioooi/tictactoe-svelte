var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function s(){return Object.create(null)}function l(t){t.forEach(n)}function r(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}const o="undefined"!=typeof window;let a=o?()=>window.performance.now():()=>Date.now(),c=o?t=>requestAnimationFrame(t):t;const u=new Set;function h(t){u.forEach(e=>{e.c(t)||(u.delete(e),e.f())}),0!==u.size&&c(h)}function f(t,e){t.appendChild(e)}function d(t,e,n){t.insertBefore(e,n||null)}function p(t){t.parentNode.removeChild(t)}function m(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function g(t){return document.createElement(t)}function v(t){return document.createTextNode(t)}function _(){return v(" ")}function $(){return v("")}function y(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function w(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t,e){e=""+e,t.data!==e&&(t.data=e)}function x(t,e){t.value=null==e?"":e}function k(t,e,n,s){t.style.setProperty(e,n,s?"important":"")}function M(t,e,n){t.classList[n?"add":"remove"](e)}class E{constructor(t=null){this.a=t,this.e=this.n=null}m(t,e,n=null){this.e||(this.e=g(e.nodeName),this.t=e,this.h(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)d(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(p)}}const q=new Set;let T,C=0;function L(t,e){const n=(t.style.animation||"").split(", "),s=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),l=n.length-s.length;l&&(t.style.animation=s.join(", "),C-=l,C||c(()=>{C||(q.forEach(t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}}),q.clear())}))}function O(t){T=t}const A=[],I=[],j=[],B=[],N=Promise.resolve();let P=!1;function S(t){j.push(t)}function D(t){B.push(t)}let F=!1;const R=new Set;function H(){if(!F){F=!0;do{for(let t=0;t<A.length;t+=1){const e=A[t];O(e),z(e.$$)}for(A.length=0;I.length;)I.pop()();for(let t=0;t<j.length;t+=1){const e=j[t];R.has(e)||(R.add(e),e())}j.length=0}while(A.length);for(;B.length;)B.pop()();P=!1,F=!1,R.clear()}}function z(t){if(null!==t.fragment){t.update(),l(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(S)}}let G;function J(t,e,n){t.dispatchEvent(function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(`${e?"intro":"outro"}${n}`))}const K=new Set;let Q;function U(){Q={r:0,c:[],p:Q}}function V(){Q.r||l(Q.c),Q=Q.p}function W(t,e){t&&t.i&&(K.delete(t),t.i(e))}function X(t,e,n,s){if(t&&t.o){if(K.has(t))return;K.add(t),Q.c.push(()=>{K.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}}const Y={duration:0};function Z(n,s,l){let i,o,f=s(n,l),d=!1,p=0;function m(){i&&L(n,i)}function v(){const{delay:s=0,duration:l=300,easing:r=e,tick:v=t,css:_}=f||Y;_&&(i=function(t,e,n,s,l,r,i,o=0){const a=16.666/s;let c="{\n";for(let t=0;t<=1;t+=a){const s=e+(n-e)*r(t);c+=100*t+`%{${i(s,1-s)}}\n`}const u=c+`100% {${i(n,1-n)}}\n}`,h=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${o}`,f=t.ownerDocument;q.add(f);const d=f.__svelte_stylesheet||(f.__svelte_stylesheet=f.head.appendChild(g("style")).sheet),p=f.__svelte_rules||(f.__svelte_rules={});p[h]||(p[h]=!0,d.insertRule(`@keyframes ${h} ${u}`,d.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?m+", ":""}${h} ${s}ms linear ${l}ms 1 both`,C+=1,h}(n,0,1,l,s,r,_,p++)),v(0,1);const $=a()+s,y=$+l;o&&o.abort(),d=!0,S(()=>J(n,!0,"start")),o=function(t){let e;return 0===u.size&&c(h),{promise:new Promise(n=>{u.add(e={c:t,f:n})}),abort(){u.delete(e)}}}(t=>{if(d){if(t>=y)return v(1,0),J(n,!0,"end"),m(),d=!1;if(t>=$){const e=r((t-$)/l);v(e,1-e)}}return d})}let _=!1;return{start(){_||(L(n),r(f)?(f=f(),(G||(G=Promise.resolve(),G.then(()=>{G=null})),G).then(v)):v())},invalidate(){_=!1},end(){d&&(m(),d=!1)}}}function tt(t,e){t.d(1),e.delete(t.key)}function et(t,e){X(t,1,1,()=>{e.delete(t.key)})}function nt(t,e,n,s,l,r,i,o,a,c,u,h){let f=t.length,d=r.length,p=f;const m={};for(;p--;)m[t[p].key]=p;const g=[],v=new Map,_=new Map;for(p=d;p--;){const t=h(l,r,p),o=n(t);let a=i.get(o);a?s&&a.p(t,e):(a=c(o,t),a.c()),v.set(o,g[p]=a),o in m&&_.set(o,Math.abs(p-m[o]))}const $=new Set,y=new Set;function w(t){W(t,1),t.m(o,u),i.set(t.key,t),u=t.first,d--}for(;f&&d;){const e=g[d-1],n=t[f-1],s=e.key,l=n.key;e===n?(u=e.first,f--,d--):v.has(l)?!i.has(s)||$.has(s)?w(e):y.has(l)?f--:_.get(s)>_.get(l)?(y.add(s),w(e)):($.add(l),f--):(a(n,i),f--)}for(;f--;){const e=t[f];v.has(e.key)||a(e,i)}for(;d;)w(g[d-1]);return g}function st(t,e,n){const s=t.$$.props[e];void 0!==s&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function lt(t){t&&t.c()}function rt(t,e,s){const{fragment:i,on_mount:o,on_destroy:a,after_update:c}=t.$$;i&&i.m(e,s),S(()=>{const e=o.map(n).filter(r);a?a.push(...e):l(e),t.$$.on_mount=[]}),c.forEach(S)}function it(t,e){const n=t.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ot(t,e){-1===t.$$.dirty[0]&&(A.push(t),P||(P=!0,N.then(H)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function at(e,n,r,i,o,a,c=[-1]){const u=T;O(e);const h=n.props||{},f=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:o,bound:s(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:s(),dirty:c};let d=!1;if(f.ctx=r?r(e,h,(t,n,...s)=>{const l=s.length?s[0]:n;return f.ctx&&o(f.ctx[t],f.ctx[t]=l)&&(f.bound[t]&&f.bound[t](l),d&&ot(e,t)),n}):[],f.update(),d=!0,l(f.before_update),f.fragment=!!i&&i(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(p)}else f.fragment&&f.fragment.c();n.intro&&W(e.$$.fragment),rt(e,n.target,n.anchor),H()}O(u)}class ct{$destroy(){it(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}class ut{constructor(t,e=!0){this.handicap=0<=t&&t<100?t:10,this.turn=e?1:-1,this.state=[[0,0,0],[0,0,0],[0,0,0]]}playerMove(t,e){if(1!==this.turn)throw Error("it's not your turn!");if(0!==this.state[t][e])throw Error("square not empty!");return this.state[t][e]=1,console.log("player move done"),this.turn=-1,this.gameFinished}makeMove(){if(-1!==this.turn)throw Error("it's not my turn!");if(console.log("computer moves"),this._randInt(100)<this.handicap)console.log("you are lucky, I will just play a random square ;)"),this._randomMove();else{let t=[()=>this._win(),()=>this._avoidDefeat(),()=>this._matchball(),()=>this._center(),()=>this._oppositeCorner(),()=>this._emptyCorner(),()=>this._randomMove()];for(;t.length&&!t.shift()(););}return this.turn=1,this.gameFinished}get winner(){return this._winner}get winningLine(){return this._winningLine}get gameFinished(){const t=[this._checkTriplet(-3),this._checkTriplet(3),0===this._where(this.state.flat(),0).length],e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[6,4,2]];return t[0].length?(console.log("computer wins"),this._winner=-1,this._winningLine=e[t[0][0]],!0):t[1].length?(console.log("player wins"),this._winner=1,this._winningLine=e[t[1][0]],!0):!(!t[2]||t[0].length||t[1].length)&&(console.log("that's a draw"),this._winner=0,!0)}_win(){return this._fillTriplet(-2,"win")}_avoidDefeat(){return this._fillTriplet(2,"avoid defeat")}_fillTriplet(t,e){const n=this._checkTriplet(t);if(n.length){const t=n[this._randInt(n.length)];if(0<=t&&t<3){const e=this._where(this.state[t],0)[0];this.state[t][e]=-1}else if(3<=t&&t<6){const e=t-3;console.log([0,1,2].map(t=>this.state[t][e]));const n=this._where([0,1,2].map(t=>this.state[t][e]),0)[0];this.state[n][e]=-1}else if(6===t){const t=this.state.flat(),e=this._where([0,4,8].map(e=>t[e]),0)[0];this.state[e][e]=-1}else{const t=this.state.flat(),e=this._where([6,4,2].map(e=>t[e]),0)[0];this.state[2-e][e]=-1}return console.log(e),!0}return!1}_matchball(){const t=(t,e)=>t+e;let e=this._where(this.state.map(e=>e.reduce(t)),-1);this._shuffle(e);for(let t=0;t<e.length;t++){const n=e[t],s=this._where(this.state[n],0);if(s.length){console.log("create matchball: find empty square in row");const t=s[this._randInt(s.length)];return this.state[n][t]=-1,!0}}let n=this._where([0,1,2].map(e=>[0,1,2].map(t=>this.state[t][e]).reduce(t)),-1);this._shuffle(n);for(let t=0;t<n.length;t++){let e=n[t];const s=this._where([0,1,2].map(t=>this.state[t][e]),0);if(s.length){console.log("create matchball: find empty square in column");const t=s[this._randInt(s.length)];return this.state[t][e]=-1,!0}}return!1}_center(){return 0===this.state[1][1]&&(console.log("play center"),this.state[1][1]=-1,!0)}_oppositeCorner(){const t=this.state.flat();return t[0]+t[8]===1?(console.log("play opposite corner"),0===this.state[0][0]?this.state[0][0]=-1:this.state[2][2]=-1,!0):t[2]+t[6]===1&&(console.log("play opposite corner"),0===this.state[0][2]?this.state[0][2]=-1:this.state[2][0]=-1,!0)}_emptyCorner(){const t=[[0,0],[0,2],[2,0],[2,2]],e=this._where([0,2,6,8].map(t=>this.state.flat()[t]),0);if(e.length){console.log("play empty corner");let n=this._randInt(e.length);return this.state[t[e[n]][0]][t[e[n]][1]]=-1,!0}return!1}_randomMove(){const t=this._where(this.state.flat(),0);if(t.length){console.log("play random square");let e=t[this._randInt(t.length)];return this.state[Math.floor(e/3)][e%3]=-1,!0}return!1}_randInt(t){return Math.floor(.99999*Math.random()*t)}_where(t,e){let n=[];return t.forEach((t,s)=>{t===e&&n.push(s)}),n}_shuffle(t){for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}_checkTriplet(t){const e=(t,e)=>t+e,n=this.state.map(t=>t.reduce(e)),s=[0,1,2].map(t=>[0,1,2].map(e=>this.state[e][t]).reduce(e)),l=this.state.flat(),r=[0,4,8].map(t=>l[t]).reduce(e),i=[6,4,2].map(t=>l[t]).reduce(e);return this._where(n.concat(s).concat([r]).concat([i]),t)}}function ht(t,e,n){const s=t.slice();return s[4]=e[n],s}function ft(t,e){let n,s,l,r,i,o,a,c,u,h=e[4].label+"";return{key:t,first:null,c(){n=g("div"),s=g("label"),l=v(h),r=_(),i=g("input"),a=_(),w(s,"class","svelte-1ihmads"),w(i,"type","radio"),i.__value=o=e[4].id,i.value=i.__value,w(i,"class","svelte-1ihmads"),e[3][0].push(i),w(n,"class","radioBtn svelte-1ihmads"),this.first=n},m(t,o){d(t,n,o),f(n,s),f(s,l),f(n,r),f(n,i),i.checked=i.__value===e[0],f(n,a),c||(u=y(i,"change",e[2]),c=!0)},p(t,e){2&e&&h!==(h=t[4].label+"")&&b(l,h),2&e&&o!==(o=t[4].id)&&(i.__value=o),i.value=i.__value,1&e&&(i.checked=i.__value===t[0])},d(t){t&&p(n),e[3][0].splice(e[3][0].indexOf(i),1),c=!1,u()}}}function dt(e){let n,s=[],l=new Map,r=e[1].map(pt);const i=t=>t[4].id;for(let t=0;t<r.length;t+=1){let n=ht(e,r,t),o=i(n);l.set(o,s[t]=ft(o,n))}return{c(){n=g("div");for(let t=0;t<s.length;t+=1)s[t].c();w(n,"class","grid svelte-1ihmads"),k(n,"grid-template-columns","repeat("+e[1].length+", 1fr)")},m(t,e){d(t,n,e);for(let t=0;t<s.length;t+=1)s[t].m(n,null)},p(t,[e]){if(3&e){const r=t[1].map(pt);s=nt(s,e,i,1,t,r,l,n,tt,ft,null,ht)}2&e&&k(n,"grid-template-columns","repeat("+t[1].length+", 1fr)")},i:t,o:t,d(t){t&&p(n);for(let t=0;t<s.length;t+=1)s[t].d()}}}const pt=(t,e)=>({id:e,label:t});function mt(t,e,n){let{label:s=["a","b"]}=e,{id:l}=e;l=Math.floor(s.length/2);return t.$set=t=>{"label"in t&&n(1,s=t.label),"id"in t&&n(0,l=t.id)},[l,s,function(){l=this.__value,n(0,l)},[[]]]}class gt extends ct{constructor(t){super(),at(this,t,mt,dt,i,{label:1,id:0})}}function vt(t){let e,n,s,r,i,o;return{c(){e=g("div"),n=g("label"),n.textContent="✎",s=_(),r=g("input"),w(n,"class","svelte-1fi8hgt"),M(n,"hidden",t[2]),w(r,"type","text"),w(r,"class","svelte-1fi8hgt"),k(e,"position","relative")},m(l,a){d(l,e,a),f(e,n),f(e,s),f(e,r),x(r,t[0]),i||(o=[y(r,"input",t[7]),y(r,"focusout",t[3]),y(r,"focus",t[4])],i=!0)},p(t,e){4&e&&M(n,"hidden",t[2]),1&e&&r.value!==t[0]&&x(r,t[0])},d(t){t&&p(e),i=!1,l(o)}}}function _t(t){let e,n,s;return{c(){e=g("input"),w(e,"type","text"),e.disabled=!0,w(e,"class","svelte-1fi8hgt")},m(l,r){d(l,e,r),x(e,t[0]),n||(s=y(e,"input",t[6]),n=!0)},p(t,n){1&n&&e.value!==t[0]&&x(e,t[0])},d(t){t&&p(e),n=!1,s()}}}function $t(e){let n,s,l,r,i;function o(t,e){return t[1]?_t:vt}let a=o(e),c=a(e);return{c(){n=g("form"),c.c(),s=_(),l=g("input"),w(l,"type","submit"),w(l,"class","svelte-1fi8hgt")},m(t,o){var a;d(t,n,o),c.m(n,null),f(n,s),f(n,l),r||(i=y(n,"submit",(a=e[3],function(t){return t.preventDefault(),a.call(this,t)})),r=!0)},p(t,[e]){a===(a=o(t))&&c?c.p(t,e):(c.d(1),c=a(t),c&&(c.c(),c.m(n,s)))},i:t,o:t,d(t){t&&p(n),c.d(),r=!1,i()}}}function yt(t,e,n){let{value:s=""}=e,{disabled:l=!1}=e,{editOnlyOnce:r=!0}=e;let i=!1;return t.$set=t=>{"value"in t&&n(0,s=t.value),"disabled"in t&&n(1,l=t.disabled),"editOnlyOnce"in t&&n(5,r=t.editOnlyOnce)},[s,l,i,()=>{r&&n(1,l=!0)},()=>{n(2,i=!0)},r,function(){s=this.value,n(0,s)},function(){s=this.value,n(0,s)}]}class wt extends ct{constructor(t){super(),at(this,t,yt,$t,i,{value:0,disabled:1,editOnlyOnce:5})}}function bt(t,e,n){const s=t.slice();return s[7]=e[n],s}function xt(e){let n;return{c(){n=g("div"),w(n,"class","cell svelte-1dt1ia5")},m(t,s){d(t,n,s),n.innerHTML=e[0]},p(t,e){1&e&&(n.innerHTML=t[0])},i:t,o:t,d(t){t&&p(n)}}}function kt(t){let e,n,s,l;function r(e){t[5].call(null,e)}function i(e){t[6].call(null,e)}let o={};return void 0!==t[0]&&(o.value=t[0]),void 0!==t[3]&&(o.disabled=t[3]),e=new wt({props:o}),I.push(()=>st(e,"value",r)),I.push(()=>st(e,"disabled",i)),{c(){lt(e.$$.fragment)},m(t,n){rt(e,t,n),l=!0},p(t,l){const r={};!n&&1&l&&(n=!0,r.value=t[0],D(()=>n=!1)),!s&&8&l&&(s=!0,r.disabled=t[3],D(()=>s=!1)),e.$set(r)},i(t){l||(W(e.$$.fragment,t),l=!0)},o(t){X(e.$$.fragment,t),l=!1},d(t){it(e,t)}}}function Mt(t,e){let n,s,l,r,i,o,a,c,u;const h=[kt,xt],m=[];function $(t,e){return t[2]?0:1}return s=$(e),l=m[s]=h[s](e),{key:t,first:null,c(){n=g("div"),l.c(),r=_(),i=g("div"),o=v(e[1]),a=_(),w(i,"class","cell svelte-1dt1ia5"),this.first=n},m(t,e){d(t,n,e),m[s].m(n,null),f(n,r),f(n,i),f(i,o),f(n,a),u=!0},p(t,e){let i=s;s=$(t),s===i?m[s].p(t,e):(U(),X(m[i],1,1,()=>{m[i]=null}),V(),l=m[s],l||(l=m[s]=h[s](t),l.c()),W(l,1),l.m(n,r)),(!u||2&e)&&b(o,t[1])},i(t){u||(W(l),c||S(()=>{c=Z(n,e[4],{}),c.start()}),u=!0)},o(t){X(l),u=!1},d(t){t&&p(n),m[s].d()}}}function Et(t){let e,n,s=[],l=new Map,r=[t[1]];const i=t=>t[7];for(let e=0;e<1;e+=1){let n=bt(t,r,e),o=i(n);l.set(o,s[e]=Mt(o,n))}return{c(){for(let t=0;t<1;t+=1)s[t].c();e=$()},m(t,l){for(let e=0;e<1;e+=1)s[e].m(t,l);d(t,e,l),n=!0},p(t,[n]){if(15&n){const r=[t[1]];U(),s=nt(s,n,i,1,t,r,l,e.parentNode,et,Mt,e,bt),V()}},i(t){if(!n){for(let t=0;t<1;t+=1)W(s[t]);n=!0}},o(t){for(let t=0;t<1;t+=1)X(s[t]);n=!1},d(t){for(let e=0;e<1;e+=1)s[e].d(t);t&&p(e)}}}function qt(t,e,n){let{label:s="LABEL"}=e,{value:l=0}=e,{edit:r=!1}=e,i=!r;return t.$set=t=>{"label"in t&&n(0,s=t.label),"value"in t&&n(1,l=t.value),"edit"in t&&n(2,r=t.edit)},[s,l,r,i,function(t,{duration:e=500}){return{duration:e,css:t=>`\n           transform: scale(${1.8-.8*function(t){return Math.pow(t-1,3)*(1-t)+1}(t)});\n        `}},function(t){s=t,n(0,s)},function(t){i=t,n(3,i)}]}class Tt extends ct{constructor(t){super(),at(this,t,qt,Et,i,{label:0,value:1,edit:2})}}function Ct(t){let e,n,s,l,r,i,o;return n=new Tt({props:{label:t[1],value:t[0].player,edit:!0}}),l=new Tt({props:{label:"Draw",value:t[0].draw}}),i=new Tt({props:{label:"Computer",value:t[0].computer}}),{c(){e=g("div"),lt(n.$$.fragment),s=_(),lt(l.$$.fragment),r=_(),lt(i.$$.fragment),w(e,"class","grid svelte-1mkv8uu")},m(t,a){d(t,e,a),rt(n,e,null),f(e,s),rt(l,e,null),f(e,r),rt(i,e,null),o=!0},p(t,[e]){const s={};2&e&&(s.label=t[1]),1&e&&(s.value=t[0].player),n.$set(s);const r={};1&e&&(r.value=t[0].draw),l.$set(r);const o={};1&e&&(o.value=t[0].computer),i.$set(o)},i(t){o||(W(n.$$.fragment,t),W(l.$$.fragment,t),W(i.$$.fragment,t),o=!0)},o(t){X(n.$$.fragment,t),X(l.$$.fragment,t),X(i.$$.fragment,t),o=!1},d(t){t&&p(e),it(n),it(l),it(i)}}}function Lt(t,e,n){let{stats:s={computer:0,draw:0,player:0}}=e,{name:l="Player"}=e;return t.$set=t=>{"stats"in t&&n(0,s=t.stats),"name"in t&&n(1,l=t.name)},[s,l]}class Ot extends ct{constructor(t){super(),at(this,t,Lt,Ct,i,{stats:0,name:1})}}function At(t,e,n){const s=t.slice();return s[21]=e[n],s}function It(t,e,n){const s=t.slice();return s[18]=e[n],s}function jt(t){let e,n,s,l,r,i,o,a,c=1===t[0][t[18]][t[21]]?"&#x0fbe;":"",u=-1===t[0][t[18]][t[21]]?"&#x262f;":"";function h(...e){return t[9](t[18],t[21],...e)}return{c(){e=g("div"),n=g("div"),l=_(),i=_(),s=new E(l),r=new E(null),w(n,"class","tag svelte-1e9n6qr"),w(e,"class","square svelte-1e9n6qr"),M(e,"played",0!==t[0][t[18]][t[21]]),M(e,"highlight-winning-line",1===t[1][t[18]][t[21]])},m(t,p){d(t,e,p),f(e,n),s.m(c,n),f(n,l),r.m(u,n),f(e,i),o||(a=y(e,"click",h),o=!0)},p(n,l){t=n,1&l&&c!==(c=1===t[0][t[18]][t[21]]?"&#x0fbe;":"")&&s.p(c),1&l&&u!==(u=-1===t[0][t[18]][t[21]]?"&#x262f;":"")&&r.p(u),1&l&&M(e,"played",0!==t[0][t[18]][t[21]]),2&l&&M(e,"highlight-winning-line",1===t[1][t[18]][t[21]])},d(t){t&&p(e),o=!1,a()}}}function Bt(t){let e,n=[...Array(3).keys()],s=[];for(let e=0;e<n.length;e+=1)s[e]=jt(At(t,n,e));return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=$()},m(t,n){for(let e=0;e<s.length;e+=1)s[e].m(t,n);d(t,e,n)},p(t,l){if(19&l){let r;for(n=[...Array(3).keys()],r=0;r<n.length;r+=1){const i=At(t,n,r);s[r]?s[r].p(i,l):(s[r]=jt(i),s[r].c(),s[r].m(e.parentNode,e))}for(;r<s.length;r+=1)s[r].d(1);s.length=n.length}},d(t){m(s,t),t&&p(e)}}}function Nt(t){let e,n,s,l,r,i,o,a,c=[...Array(3).keys()],u=[];for(let e=0;e<c.length;e+=1)u[e]=Bt(It(t,c,e));function h(e){t[10].call(null,e)}l=new Ot({props:{stats:t[2]}});let v={label:t[5].map(Pt)};return void 0!==t[3]&&(v.id=t[3]),i=new gt({props:v}),I.push(()=>st(i,"id",h)),{c(){e=g("div"),n=g("div");for(let t=0;t<u.length;t+=1)u[t].c();s=_(),lt(l.$$.fragment),r=_(),lt(i.$$.fragment),w(n,"class","board svelte-1e9n6qr"),w(e,"class","svelte-1e9n6qr")},m(t,o){d(t,e,o),f(e,n);for(let t=0;t<u.length;t+=1)u[t].m(n,null);f(e,s),rt(l,e,null),f(e,r),rt(i,e,null),a=!0},p(t,[e]){if(19&e){let s;for(c=[...Array(3).keys()],s=0;s<c.length;s+=1){const l=It(t,c,s);u[s]?u[s].p(l,e):(u[s]=Bt(l),u[s].c(),u[s].m(n,null))}for(;s<u.length;s+=1)u[s].d(1);u.length=c.length}const s={};4&e&&(s.stats=t[2]),l.$set(s);const r={};!o&&8&e&&(o=!0,r.id=t[3],D(()=>o=!1)),i.$set(r)},i(t){a||(W(l.$$.fragment,t),W(i.$$.fragment,t),a=!0)},o(t){X(l.$$.fragment,t),X(i.$$.fragment,t),a=!1},d(t){t&&p(e),m(u,t),it(l),it(i)}}}const Pt=t=>t.label;function St(t,e,n){let{handicap:s=80}=e,{playerBegins:l=!0}=e,{delay:r=300}=e;const i=t=>new Promise(e=>setTimeout(e,t));let o,a,c,u,h,f=!0;async function d(t=!0){o=new ut(s,t),n(0,a=o.state),n(1,c=[[0,0,0],[0,0,0],[0,0,0]]),t||(u=!0,await i(50),o.makeMove()),n(0,a=o.state),u=!1}async function p(){let t=!0;if(-1===o.winner?n(2,h.computer+=1,h):1===o.winner?(n(2,h.player+=1,h),t=!1):(n(2,h.draw+=1,h),t=f,f=!f),n(1,c=[[0,0,0],[0,0,0],[0,0,0]]),0!==o.winner){o._winningLine.forEach(t=>{n(1,c[Math.floor(t/3)][t%3]=1,c)})}await i(1200),d(t)}async function m(t,e){if(!u){u=!0;try{let s=o.playerMove(t,e);n(0,a=o.state),s?p():(await i(Math.floor((.6+.4*Math.random())*r)),s=o.makeMove(),n(0,a=o.state),s?p():u=!1)}catch(t){console.error(t),u=!1}}}const g=[{label:"trivial",handicap:90},{label:"easy",handicap:65},{label:"medium",handicap:48},{label:"hard",handicap:24},{label:"impossible",handicap:5}];let v=0;return t.$set=t=>{"handicap"in t&&n(6,s=t.handicap),"playerBegins"in t&&n(7,l=t.playerBegins),"delay"in t&&n(8,r=t.delay)},t.$$.update=()=>{136&t.$$.dirty&&(console.log("level selected "+v),n(6,s=g[v].handicap),n(2,h={computer:0,draw:0,player:0}),d(l))},[a,c,h,v,m,g,s,l,r,(t,e)=>m(t,e),function(t){v=t,n(3,v)}]}class Dt extends ct{constructor(t){super(),at(this,t,St,Nt,i,{handicap:6,playerBegins:7,delay:8})}}function Ft(e){let n,s,l,r,i,o,a;return o=new Dt({}),{c(){n=g("h1"),n.textContent="Let's Play: Tic Tac Toe",s=_(),l=g("h2"),l.textContent="(implemented using Svelte)",r=_(),i=g("main"),lt(o.$$.fragment),w(n,"class","svelte-1qy41oj"),w(l,"class","svelte-1qy41oj"),w(i,"class","svelte-1qy41oj")},m(t,e){d(t,n,e),d(t,s,e),d(t,l,e),d(t,r,e),d(t,i,e),rt(o,i,null),a=!0},p:t,i(t){a||(W(o.$$.fragment,t),a=!0)},o(t){X(o.$$.fragment,t),a=!1},d(t){t&&p(n),t&&p(s),t&&p(l),t&&p(r),t&&p(i),it(o)}}}return new class extends ct{constructor(t){super(),at(this,t,null,Ft,i,{})}}({target:document.body})}();
